<script>
$('#faqs').ready(function(){
	$('#faqs #innerScroller').width(pageW*2);
	$('#faqs .menu, #faqs .content').width(pageW);
	subPage=[['gettingstarted',3],['operatingaccount',6],['betting',4],['complainthandling',4]];
	qNum=0;
	for(a=0; a<subPage.length; a++){
		subPage[a][2]=qNum+1;
		qNum+=subPage[a][1];
	};
	
	checkSubHash = window.location.hash.split(".")[1];
	
	if(checkSubHash!=undefined){
		checkSubHash = checkSubHash.toLowerCase();	
		loop1:
		for(a=0; a<subPage.length; a++){
			lastNum=subPage[a][1]+subPage[a][2]-1;
			for(b=subPage[a][2]; b<=subPage[a][1]+subPage[a][2]-1; b++){
				if(checkSubHash=='q'+b){
					openSubPage(a+1, b, false);
					break loop1;
				}else if(a==subPage.length-1 && b==lastNum){
					changeHash(pages[(currPage-1)][0],'');
				};
			};
		};
	};
	resize();
	setTimeout(function(){
		qNum=1;
		$("#faqs #content1 #p1menu > li").each(function( index ){
			$(this).data('num',index+1).data('FirstQ',qNum).click(function(){
				openSubPage($(this).data('num'), '', true);
			});
			qNum+=subPage[index][1];
		});
		$('#faqs #content2 > h3').click(function(){
			openSubPage(0, '', true);
		});
	}, 100);
	function openSubPage(NUM, Q ,anim){	
		if(!freezeBTN||!anim){
			freezeBTN=true;
			if(anim){
				aTime=animTime*.66;
			}else{
				aTime=0;
			};
			if(NUM==0){
				changeHash(pages[(currPage-1)][0],'');
				upDownPosition(0,aTime);
				$('#faqs #innerScroller').stop().animate({'left':0},aTime,function(){
					$('#faqs #content2 > h3').empty();
					$('#faqs #content2 .textScroll2').empty();
					freezeBTN=false;
				});
				currSubPage='';
				currQ='';
			}else{				
				if(anim){
					if(Q==''){
						changeHash(pages[(currPage-1)][0],'');
					}else{
						changeHash(pages[(currPage-1)][0],'q'+Q);
					};
				};
				$('#faqs #content2 > h3').empty().text($('#faqs #p1menu > #p'+NUM).text());
				if(Q<subPage[NUM-1][2]||Q>subPage[NUM-1][1]+subPage[NUM-1][2]-1){
					Q='';
				};
				currSubPage=NUM;
				currQ=Q;
				// load subpage -- 
				$('#faqs #content2 .textScroll2').empty().load("faqs_"+subPage[NUM-1][0]+'.html', function(){
					$(this).children('article').children('ul').children('li').each(function(index){
						if(currQ==subPage[currSubPage-1][2]+index){
							$(this).children('h4').addClass('open');
							$(this).children('div').show();
							scrollPage($(this).offset().top, false);
						};
						$(this).children('h4').data('Qnum',subPage[currSubPage-1][2]+index).click(function(){
							if(!freezeBTN){
								freezeBTN=true;
								currQ=$(this).data('Qnum');
								$(this).parent().parent().children('li').each(function(index){
									if(subPage[currSubPage-1][2]+index==currQ){
										if($(this).children('h4').hasClass('open')){
											changeHash(pages[(currPage-1)][0],'');
											$(this).children('h4').removeClass('open');
											$(this).children('div').stop().slideUp(animTime, function(){
												freezeBTN=false;
											});
										}else{
											changeHash(pages[(currPage-1)][0],'q'+$(this).children('h4').data('Qnum'));
											$(this).children('h4').addClass('open');
											$(this).children('div').stop().slideDown(animTime, function(){
												scrollPage($(this).parent().offset().top, true);
												setTimeout(function(){freezeBTN=false}, animTime);
											});
										};
									}else{
										$(this).children('h4').removeClass('open');
										$(this).children('div').stop().slideUp(animTime);										
									};
								});
							};
						});
					});
				});
				upDownPosition(0-1*pageW,aTime);
				$('#faqs #innerScroller').stop().animate({'left':0-pageW},aTime,function(){
					freezeBTN=false;
				});
			};
		};
	};
	function scrollPage(num , anim){
		scrollNum=num+$('#faqs #content2 .textScroll').scrollTop()-$('#faqs #content2 .textScroll').offset().top;
		if (anim){
			$('#faqs #content2 .textScroll').stop().animate({scrollTop: scrollNum}, animTime);
		}else{
			$('#faqs #content2 .textScroll').scrollTop(scrollNum);
		};
	};
});
</script>
<div id='faqs'>
	<div id='innerScroller'>
		<div id='content1' class='content menu'>
			<h2>faqs</h2>
			<ul id='p1menu'>
				<li id='p1'>getting started</li>
				<li id='p2'>operating your account</li>
				<li id='p3'>betting</li>
				<li id='p4'>complaint handling</li>
			</ul>
		</div>
		<div id='content2' class='content'>
			<h3></h3>
			<div class="textScroll">
				<div class="textScroll2"></div>
			</div>
		</div>
	</div>
</div>